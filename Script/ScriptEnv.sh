#-----------------------------------------------------------------------------
#	Define the script environment.
#-----------------------------------------------------------------------------
ROOT_DIR="${MY_FULL_DIR:-$(pwd)}"
SCRIPT_DIR="${ROOT_DIR}"

#-----------------------------------------------------------------------------
#	Common Functions.
#-----------------------------------------------------------------------------
FUNCTION_DIR="`(cd ${SCRIPT_DIR}/Function; pwd)`"

for function in $(ls ${FUNCTION_DIR}/*.sh)
do
	source ${function}
done

#-----------------------------------------------------------------------------
#	Install an interrupt handler.
#-----------------------------------------------------------------------------
interrupt_handler

#-----------------------------------------------------------------------------
#	Executable name.
#-----------------------------------------------------------------------------
EXECNAME="$(get_EXECNAME)"

#-----------------------------------------------------------------------------
#	Process ID.
#-----------------------------------------------------------------------------
PID=$$

#-----------------------------------------------------------------------------
#	Timestamps.
#-----------------------------------------------------------------------------
TIMESTAMP="`get_TIMESTAMP`"		# YYYYMMDD_HHMMSS
DATE="${TIMESTAMP:0:8}"			# YYYYMMDD

#-----------------------------------------------------------------------------
#	Every script writes all output to LOG_FILE.
#-----------------------------------------------------------------------------
LOG_DIR="/tmp/Log${DATE}"
mkdir -p ${LOG_DIR}
chmod -f 777 ${LOG_DIR}

LOG_FILE="$(get_LOG_FILE)"

#-----------------------------------------------------------------------------
#	Every script creates temporary files in TEMPORARY_DIR.
#	The default clean_up() function removes this directory.
#-----------------------------------------------------------------------------
ROOT_TEMPORARY_DIR="/tmp/Temporary${DATE}"
mkdir -p ${ROOT_TEMPORARY_DIR}
chmod -f 777 ${ROOT_TEMPORARY_DIR}

TEMPORARY_DIR="${ROOT_TEMPORARY_DIR}/${EXECNAME}.${PID}"
mkdir -p ${TEMPORARY_DIR}

#-----------------------------------------------------------------------------
#	Global error count.
#-----------------------------------------------------------------------------
ERROR_COUNT=0

#-----------------------------------------------------------------------------
#	Supported EnterpriseDB and PostgreSQL versions.
#-----------------------------------------------------------------------------
EDB_INTEGER_VERSIONS="92"
EDB_NO_DOT_VERSIONS="92AS"
EDB_VERSIONS="9.2AS"
PG_INTEGER_VERSIONS="92 93"
PG_NO_DOT_VERSIONS="${PG_INTEGER_VERSIONS}"
PG_VERSIONS="9.2 9.3"

#-----------------------------------------------------------------------------
#	Define the PostgreSQL environment.
#-----------------------------------------------------------------------------
source ${SCRIPT_DIR}/PgEnv.sh

#-----------------------------------------------------------------------------
#	Return.
#-----------------------------------------------------------------------------
